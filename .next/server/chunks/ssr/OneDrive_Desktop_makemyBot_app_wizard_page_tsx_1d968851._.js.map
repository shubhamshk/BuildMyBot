{"version":3,"sources":["../../../../../../../OneDrive/Desktop/makemyBot/app/wizard/page.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/wizard-steps/basics.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/ai-auto-fill-button.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/wizard-steps/personality.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/wizard-steps/backstory.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/wizard-steps/speech.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/wizard-steps/boundaries.tsx","../../../../../../../OneDrive/Desktop/makemyBot/components/api-key-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ArrowLeft, CheckCircle2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { useRouter } from \"next/navigation\";\nimport BasicsStep from \"@/components/wizard-steps/basics\";\nimport PersonalityStep from \"@/components/wizard-steps/personality\";\nimport BackstoryStep from \"@/components/wizard-steps/backstory\";\nimport SpeechStep from \"@/components/wizard-steps/speech\";\nimport BoundariesStep from \"@/components/wizard-steps/boundaries\";\nimport { APIKeyModal } from \"@/components/api-key-modal\";\nimport { isAPIKeyConnected, APIProvider } from \"@/lib/api-key\";\nimport { validateAPIKey } from \"@/lib/generation/service\";\n\nconst STEPS = [\n  { id: \"basics\", label: \"Basics\" },\n  { id: \"personality\", label: \"Personality\" },\n  { id: \"backstory\", label: \"Backstory\" },\n  { id: \"speech\", label: \"Speech & Behavior\" },\n  { id: \"boundaries\", label: \"Boundaries & Tone\" },\n];\n\nexport default function WizardPage() {\n  const router = useRouter();\n  const {\n    characters,\n    activeCharacterIndex,\n    setActiveCharacterIndex,\n    updateCharacter,\n    isMultiMode,\n  } = useCharacter();\n  const [currentStep, setCurrentStep] = useState(0);\n  const [showAPIKeyModal, setShowAPIKeyModal] = useState(false);\n  const [characterSteps, setCharacterSteps] = useState<Record<string, number>>({});\n\n  // Redirect if no characters initialized\n  useEffect(() => {\n    if (characters.length === 0) {\n      router.push(\"/create\");\n    }\n  }, [characters, router]);\n\n  // Initialize step tracking for each character\n  useEffect(() => {\n    const steps: Record<string, number> = {};\n    characters.forEach((char) => {\n      if (characterSteps[char.id] === undefined) {\n        steps[char.id] = 0;\n      }\n    });\n    if (Object.keys(steps).length > 0) {\n      setCharacterSteps((prev) => ({ ...prev, ...steps }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [characters.length]);\n\n  // Update current step when character changes\n  useEffect(() => {\n    const currentCharId = characters[activeCharacterIndex]?.id;\n    if (currentCharId) {\n      const step = characterSteps[currentCharId] ?? 0;\n      setCurrentStep(step);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeCharacterIndex]);\n\n  if (characters.length === 0) {\n    return null;\n  }\n\n  const currentCharacter = characters[activeCharacterIndex];\n  const currentStepId = STEPS[currentStep].id;\n\n  const handleNext = () => {\n    const currentCharId = currentCharacter.id;\n\n    if (currentStep < STEPS.length - 1) {\n      const nextStep = currentStep + 1;\n      setCurrentStep(nextStep);\n      setCharacterSteps((prev) => ({\n        ...prev,\n        [currentCharId]: nextStep,\n      }));\n    } else {\n      // Last step - check if current character is complete\n      const isComplete =\n        currentCharacter.basics.name &&\n        currentCharacter.basics.setting &&\n        currentCharacter.backstoryStyle &&\n        currentCharacter.speechRules?.tone &&\n        currentCharacter.boundaries?.contentRating;\n\n      if (isComplete) {\n        // Check if all characters are complete\n        const allComplete = characters.every((char) => {\n          return (\n            char.basics.name &&\n            char.basics.setting &&\n            char.backstoryStyle &&\n            char.speechRules?.tone &&\n            char.boundaries?.contentRating\n          );\n        });\n\n        if (allComplete) {\n          handleGenerate();\n        } else {\n          // Find next incomplete character\n          const nextIncompleteIndex = characters.findIndex(\n            (char, idx) =>\n              idx > activeCharacterIndex &&\n              (!char.basics.name ||\n                !char.basics.setting ||\n                !char.backstoryStyle ||\n                !char.speechRules?.tone ||\n                !char.boundaries?.contentRating)\n          );\n\n          if (nextIncompleteIndex !== -1) {\n            setActiveCharacterIndex(nextIncompleteIndex);\n            setCurrentStep(0);\n            setCharacterSteps((prev) => ({\n              ...prev,\n              [characters[nextIncompleteIndex].id]: 0,\n            }));\n          }\n        }\n      }\n    }\n  };\n\n  const handleBack = () => {\n    const currentCharId = currentCharacter.id;\n\n    if (currentStep > 0) {\n      const prevStep = currentStep - 1;\n      setCurrentStep(prevStep);\n      setCharacterSteps((prev) => ({\n        ...prev,\n        [currentCharId]: prevStep,\n      }));\n    }\n  };\n\n  const handleCharacterSwitch = (index: number) => {\n    setActiveCharacterIndex(index);\n    const charId = characters[index].id;\n    const step = characterSteps[charId] ?? 0;\n    setCurrentStep(step);\n  };\n\n  const handleAIAutoFillAll = async (storyIdea: string, apiKey: string, provider: APIProvider) => {\n    // Auto-fill all characters in background - don't wait\n    const autoFillPromises = characters.map(async (char, charIndex) => {\n      try {\n        // Auto-fill basics\n        const basicsResponse = await fetch(\"/api/auto-fill-wizard\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            storyIdea,\n            step: \"basics\",\n            characterIndex: charIndex,\n            apiKey,\n            provider,\n          }),\n        });\n        const basicsData = await basicsResponse.json();\n\n        // Auto-fill personality\n        const personalityResponse = await fetch(\"/api/auto-fill-wizard\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            storyIdea,\n            step: \"personality\",\n            characterIndex: charIndex,\n            existingData: { basics: basicsData.data },\n            apiKey,\n            provider,\n          }),\n        });\n        const personalityData = await personalityResponse.json();\n\n        // Auto-fill backstory\n        const backstoryResponse = await fetch(\"/api/auto-fill-wizard\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            storyIdea,\n            step: \"backstory\",\n            characterIndex: charIndex,\n            existingData: { basics: basicsData.data },\n            apiKey,\n            provider,\n          }),\n        });\n        const backstoryData = await backstoryResponse.json();\n\n        // Auto-fill speech\n        const speechResponse = await fetch(\"/api/auto-fill-wizard\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            storyIdea,\n            step: \"speech\",\n            characterIndex: charIndex,\n            existingData: { basics: basicsData.data },\n            apiKey,\n            provider,\n          }),\n        });\n        const speechData = await speechResponse.json();\n\n        // Auto-fill boundaries\n        const boundariesResponse = await fetch(\"/api/auto-fill-wizard\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            storyIdea,\n            step: \"boundaries\",\n            characterIndex: charIndex,\n            existingData: { basics: basicsData.data },\n            apiKey,\n            provider,\n          }),\n        });\n        const boundariesData = await boundariesResponse.json();\n\n        // Update character with all data\n        updateCharacter(charIndex, {\n          basics: basicsData.data,\n          personality: personalityData.data,\n          backstoryStyle: backstoryData.data,\n          speechRules: speechData.data,\n          boundaries: boundariesData.data,\n        });\n      } catch (error) {\n        console.error(`Auto-fill error for character ${charIndex}:`, error);\n      }\n    });\n\n    // Process in background - don't wait\n    Promise.all(autoFillPromises).catch(err => {\n      console.error(\"Background auto-fill error:\", err);\n    });\n\n    // Clear the flag\n    localStorage.removeItem(\"aiAutoFill\");\n    localStorage.removeItem(\"aiAutoFillStoryIdea\");\n    localStorage.removeItem(\"aiAutoFillApiKey\");\n    localStorage.removeItem(\"aiAutoFillProvider\");\n  };\n\n  const handleGenerate = async () => {\n    if (!isAPIKeyConnected()) {\n      setShowAPIKeyModal(true);\n      return;\n    }\n\n    const keyCheck = validateAPIKey();\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\n      setShowAPIKeyModal(true);\n      return;\n    }\n\n    const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n    // Mark that background processing should start\n    localStorage.setItem(\"backgroundProcessing\", \"true\");\n    localStorage.setItem(\"processingApiKey\", keyCheck.apiKey);\n    localStorage.setItem(\"processingProvider\", keyCheck.provider);\n    if (storyIdea) {\n      localStorage.setItem(\"processingStoryIdea\", storyIdea);\n    }\n\n    // Navigate to results immediately - processing will happen in background\n    if (isMultiMode) {\n      router.push(\"/characters/results\");\n    } else {\n      router.push(`/character/${currentCharacter.id}`);\n    }\n  };\n\n  const getStepProgress = (charIndex: number) => {\n    const char = characters[charIndex];\n    let completed = 0;\n    if (char.basics.name && char.basics.setting) completed++;\n    if (char.personality.warmth !== 50 || char.personality.confidence !== 50) completed++;\n    if (char.backstoryStyle) completed++;\n    if (char.speechRules?.tone) completed++;\n    if (char.boundaries?.contentRating) completed++;\n    return completed;\n  };\n\n  const renderStep = () => {\n    switch (currentStepId) {\n      case \"basics\":\n        return <BasicsStep characterIndex={activeCharacterIndex} onNext={handleNext} />;\n      case \"personality\":\n        return <PersonalityStep characterIndex={activeCharacterIndex} onNext={handleNext} onBack={handleBack} />;\n      case \"backstory\":\n        return <BackstoryStep characterIndex={activeCharacterIndex} onNext={handleNext} onBack={handleBack} />;\n      case \"speech\":\n        return <SpeechStep characterIndex={activeCharacterIndex} onNext={handleNext} onBack={handleBack} />;\n      case \"boundaries\":\n        return <BoundariesStep characterIndex={activeCharacterIndex} onNext={handleGenerate} onBack={handleBack} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background px-4 py-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link\n            href=\"/create\"\n            className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6\"\n          >\n            <ArrowLeft className=\"w-5 h-5\" />\n            <span className=\"text-sm\">Back</span>\n          </Link>\n\n          {/* Character Tabs (for multi-mode) */}\n          {isMultiMode && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-medium text-muted-foreground mb-4\">\n                Select Character to Edit\n              </h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n                {characters.map((char, index) => {\n                  const progress = getStepProgress(index);\n                  const isActive = index === activeCharacterIndex;\n                  const isComplete = progress === STEPS.length;\n                  const progressPercent = (progress / STEPS.length) * 100;\n\n                  return (\n                    <motion.button\n                      key={char.id}\n                      onClick={() => handleCharacterSwitch(index)}\n                      whileHover={{ scale: 1.02 }}\n                      whileTap={{ scale: 0.98 }}\n                      className={`relative glass rounded-2xl p-4 border-2 transition-all overflow-hidden group ${isActive\n                          ? \"border-violet-500 bg-violet-500/10 shadow-lg shadow-violet-500/20\"\n                          : \"border-border hover:border-violet-500/50\"\n                        }`}\n                    >\n                      {/* Active indicator */}\n                      {isActive && (\n                        <motion.div\n                          initial={{ scale: 0 }}\n                          animate={{ scale: 1 }}\n                          className=\"absolute top-2 right-2 w-5 h-5 rounded-full bg-violet-500 flex items-center justify-center\"\n                        >\n                          <div className=\"w-2 h-2 rounded-full bg-white\" />\n                        </motion.div>\n                      )}\n\n                      {/* Completion checkmark */}\n                      {isComplete && !isActive && (\n                        <div className=\"absolute top-2 right-2 w-5 h-5 rounded-full bg-green-500 flex items-center justify-center\">\n                          <CheckCircle2 className=\"w-3 h-3 text-white\" />\n                        </div>\n                      )}\n\n                      {/* Character number */}\n                      <div className={`w-12 h-12 rounded-xl mb-3 flex items-center justify-center font-bold text-lg transition-all ${isActive\n                          ? \"bg-violet-500/20 border-2 border-violet-500/50 text-violet-400\"\n                          : \"bg-muted border-2 border-border text-muted-foreground\"\n                        }`}>\n                        {index + 1}\n                      </div>\n\n                      {/* Character name or placeholder */}\n                      <h4 className={`text-sm font-semibold mb-2 text-left transition-colors ${isActive ? \"text-foreground\" : \"text-foreground/70\"\n                        }`}>\n                        {char.basics.name || `Character ${index + 1}`}\n                      </h4>\n\n                      {/* Progress bar */}\n                      <div className=\"h-1.5 rounded-full glass overflow-hidden mb-2\">\n                        <motion.div\n                          className={`h-full rounded-full ${isComplete ? \"bg-green-500\" : \"bg-violet-500\"\n                            }`}\n                          initial={{ width: 0 }}\n                          animate={{ width: `${progressPercent}%` }}\n                          transition={{ duration: 0.3 }}\n                        />\n                      </div>\n\n                      {/* Progress text */}\n                      <p className=\"text-xs text-muted-foreground text-left\">\n                        {progress} of {STEPS.length} steps\n                      </p>\n\n                      {/* Hover effect */}\n                      {!isActive && (\n                        <div className=\"absolute inset-0 bg-violet-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl\" />\n                      )}\n                    </motion.button>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Step Progress */}\n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center gap-3 mb-4\">\n              {isMultiMode && (\n                <div className=\"px-3 py-1.5 rounded-lg glass border border-violet-500/30 bg-violet-500/10\">\n                  <span className=\"text-xs font-semibold text-violet-400\">\n                    Character {activeCharacterIndex + 1} of {characters.length}\n                  </span>\n                </div>\n              )}\n              <h1 className=\"text-2xl font-bold text-foreground\">Character Wizard</h1>\n            </div>\n            <div className=\"flex justify-center gap-2 mb-4\">\n              {STEPS.map((step, index) => (\n                <motion.div\n                  key={step.id}\n                  initial={{ scale: 0.8 }}\n                  animate={{ scale: index <= currentStep ? 1 : 0.8 }}\n                  className={`h-2 rounded-full transition-all ${index <= currentStep\n                      ? \"w-10 bg-violet-500 shadow-lg shadow-violet-500/30\"\n                      : \"w-8 bg-muted\"\n                    }`}\n                />\n              ))}\n            </div>\n            <div className=\"flex items-center justify-center gap-2\">\n              <p className=\"text-sm font-medium text-foreground\">\n                Step {currentStep + 1} of {STEPS.length}\n              </p>\n              <span className=\"text-muted-foreground\">â€¢</span>\n              <p className=\"text-sm text-muted-foreground\">\n                {STEPS[currentStep].label}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Step Content */}\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={currentStepId}\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            transition={{ duration: 0.3, ease: [0.22, 1, 0.36, 1] }}\n          >\n            {renderStep()}\n          </motion.div>\n        </AnimatePresence>\n      </div>\n\n      {/* API Key Modal */}\n      <APIKeyModal\n        isOpen={showAPIKeyModal}\n        onClose={() => setShowAPIKeyModal(false)}\n        onSave={() => {\n          setShowAPIKeyModal(false);\n          handleGenerate();\n        }}\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { ArrowRight } from \"lucide-react\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { motion } from \"framer-motion\";\nimport { AIAutoFillButton } from \"@/components/ai-auto-fill-button\";\n\ninterface BasicsStepProps {\n  characterIndex: number;\n  onNext: () => void;\n}\n\nexport default function BasicsStep({ characterIndex, onNext }: BasicsStepProps) {\n  const { characters, updateCharacter } = useCharacter();\n  const character = characters[characterIndex];\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validate = () => {\n    const newErrors: Record<string, string> = {};\n    if (!character.basics.name.trim()) newErrors.name = \"Name is required\";\n    if (!character.basics.age) newErrors.age = \"Age is required\";\n    if (!character.basics.setting.trim()) newErrors.setting = \"Setting is required\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    if (validate()) {\n      onNext();\n    }\n  };\n\n  const handleAutoFill = (data: any) => {\n    updateCharacter(characterIndex, {\n      basics: {\n        name: data.name || character.basics.name,\n        age: data.age || character.basics.age,\n        gender: data.gender || character.basics.gender,\n        setting: data.setting || character.basics.setting,\n        relationship: data.relationship || character.basics.relationship,\n      },\n    });\n  };\n\n  const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-4xl font-bold text-foreground\">Basic Info</h2>\n        {storyIdea && (\n          <AIAutoFillButton\n            onAutoFill={handleAutoFill}\n            step=\"basics\"\n            characterIndex={characterIndex}\n            existingData={character}\n            storyIdea={storyIdea}\n          />\n        )}\n      </div>\n      <p className=\"text-muted-foreground mb-8\">\n        Let&apos;s start with the fundamentals of your character.\n      </p>\n\n      <div className=\"glass rounded-3xl p-6 md:p-8 space-y-6 border border-border\">\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Character Name\n          </label>\n          <input\n            type=\"text\"\n            placeholder=\"e.g., Elara Vance\"\n            value={character.basics.name}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                basics: { ...character.basics, name: e.target.value },\n              })\n            }\n            className={`w-full h-12 px-4 rounded-xl glass border transition-all outline-none ${\n              errors.name\n                ? \"border-red-500/50 focus:border-red-500\"\n                : \"border-border focus:border-violet-500\"\n            }`}\n          />\n          {errors.name && <p className=\"text-sm text-red-400 mt-1\">{errors.name}</p>}\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"text-sm font-medium text-foreground mb-2 block\">Age (must be 18+)</label>\n            <input\n              type=\"number\"\n              placeholder=\"24\"\n              min=\"18\"\n              value={character.basics.age}\n              onChange={(e) => {\n                const ageValue = e.target.value;\n                // Enforce minimum age of 18\n                if (ageValue && parseInt(ageValue) < 18) {\n                  return; // Don't update if below 18\n                }\n                updateCharacter(characterIndex, {\n                  basics: { ...character.basics, age: ageValue },\n                });\n              }}\n              className={`w-full h-12 px-4 rounded-xl glass border transition-all outline-none ${\n                errors.age\n                  ? \"border-red-500/50 focus:border-red-500\"\n                  : \"border-border focus:border-violet-500\"\n              }`}\n            />\n            {errors.age && <p className=\"text-sm text-red-400 mt-1\">{errors.age}</p>}\n            {character.basics.age && parseInt(character.basics.age) < 18 && (\n              <p className=\"text-sm text-red-400 mt-1\">Age must be 18 or above</p>\n            )}\n          </div>\n          <div>\n            <label className=\"text-sm font-medium text-foreground mb-2 block\">Gender</label>\n            <select\n              value={character.basics.gender}\n              onChange={(e) =>\n                updateCharacter(characterIndex, {\n                  basics: { ...character.basics, gender: e.target.value },\n                })\n              }\n              className=\"w-full h-12 px-4 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none appearance-none cursor-pointer [&>option]:bg-zinc-900 [&>option]:text-white\"\n            >\n              <option value=\"Female\" className=\"bg-zinc-900 text-white\">Female</option>\n              <option value=\"Male\" className=\"bg-zinc-900 text-white\">Male</option>\n              <option value=\"Non-binary\" className=\"bg-zinc-900 text-white\">Non-binary</option>\n              <option value=\"Other\" className=\"bg-zinc-900 text-white\">Other</option>\n            </select>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Story Setting\n          </label>\n          <input\n            type=\"text\"\n            placeholder=\"e.g., Cyberpunk Neo-Tokyo, Medieval Fantasy Kingdom\"\n            value={character.basics.setting}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                basics: { ...character.basics, setting: e.target.value },\n              })\n            }\n            className={`w-full h-12 px-4 rounded-xl glass border transition-all outline-none ${\n              errors.setting\n                ? \"border-red-500/50 focus:border-red-500\"\n                : \"border-border focus:border-violet-500\"\n            }`}\n          />\n          {errors.setting && <p className=\"text-sm text-red-400 mt-1\">{errors.setting}</p>}\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Relationship to User\n          </label>\n          <input\n            type=\"text\"\n            placeholder=\"e.g., Mentor, Arch-rival, Ally\"\n            value={character.basics.relationship}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                basics: { ...character.basics, relationship: e.target.value },\n              })\n            }\n            className=\"w-full h-12 px-4 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none\"\n          />\n        </div>\n      </div>\n\n      <motion.button\n        onClick={handleNext}\n        className=\"w-full mt-8 py-4 rounded-2xl bg-violet-500 hover:bg-violet-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors\"\n        whileHover={{ scale: 1.02 }}\n        whileTap={{ scale: 0.98 }}\n      >\n        Next Step\n        <ArrowRight className=\"w-5 h-5\" />\n      </motion.button>\n    </div>\n  );\n}\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Wand2, Loader2 } from \"lucide-react\";\r\nimport { validateAPIKey } from \"@/lib/generation/service\";\r\nimport { isAPIKeyConnected } from \"@/lib/api-key\";\r\nimport { APIKeyManager } from \"./api-key-manager\";\r\n\r\ninterface AIAutoFillButtonProps {\r\n  onAutoFill: (data: any) => void;\r\n  step: string;\r\n  characterIndex: number;\r\n  existingData?: any;\r\n  storyIdea?: string;\r\n  className?: string;\r\n}\r\n\r\nexport function AIAutoFillButton({\r\n  onAutoFill,\r\n  step,\r\n  characterIndex,\r\n  existingData,\r\n  storyIdea,\r\n  className = \"\",\r\n}: AIAutoFillButtonProps) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showAPIKeyModal, setShowAPIKeyModal] = useState(false);\r\n\r\n  const handleAutoFill = async () => {\r\n    const idea = storyIdea || localStorage.getItem(\"storyIdea\") || \"\";\r\n    \r\n    if (!idea) {\r\n      alert(\"Please provide a story idea first. Go back to the idea page.\");\r\n      return;\r\n    }\r\n\r\n    if (!isAPIKeyConnected()) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    const keyCheck = validateAPIKey();\r\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(\"/api/auto-fill-wizard\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          storyIdea: idea,\r\n          step,\r\n          characterIndex,\r\n          existingData,\r\n          apiKey: keyCheck.apiKey,\r\n          provider: keyCheck.provider,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to auto-fill\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      onAutoFill(result.data);\r\n    } catch (error) {\r\n      console.error(\"Auto-fill error:\", error);\r\n      alert(\"Failed to auto-fill. Please try again.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={handleAutoFill}\r\n        disabled={isLoading}\r\n        className={`flex items-center gap-2 px-4 py-2 rounded-lg bg-violet-500/20 border border-violet-500/50 hover:bg-violet-500/30 text-violet-400 transition-colors disabled:opacity-50 ${className}`}\r\n      >\r\n        {isLoading ? (\r\n          <>\r\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n            AI Thinking...\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Wand2 className=\"w-4 h-4\" />\r\n            Auto-Fill with AI\r\n          </>\r\n        )}\r\n      </button>\r\n      <APIKeyManager\r\n        isOpen={showAPIKeyModal}\r\n        onClose={() => setShowAPIKeyModal(false)}\r\n        onSave={() => {\r\n          setShowAPIKeyModal(false);\r\n          handleAutoFill();\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","\"use client\";\n\nimport { ArrowLeft, ArrowRight } from \"lucide-react\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { motion } from \"framer-motion\";\nimport { AIAutoFillButton } from \"@/components/ai-auto-fill-button\";\n\ninterface PersonalityStepProps {\n  characterIndex: number;\n  onNext: () => void;\n  onBack: () => void;\n}\n\nexport default function PersonalityStep({ characterIndex, onNext, onBack }: PersonalityStepProps) {\n  const { characters, updateCharacter } = useCharacter();\n  const character = characters[characterIndex];\n\n  const sliders = [\n    {\n      key: \"warmth\" as const,\n      label: \"Warm vs. Cold\",\n      left: \"WARM\",\n      right: \"COLD\",\n    },\n    {\n      key: \"confidence\" as const,\n      label: \"Shy vs. Confident\",\n      left: \"SHY\",\n      right: \"CONFIDENT\",\n    },\n    {\n      key: \"calmness\" as const,\n      label: \"Calm vs. Chaotic\",\n      left: \"CALM\",\n      right: \"CHAOTIC\",\n    },\n    {\n      key: \"reserve\" as const,\n      label: \"Emotional vs. Reserved\",\n      left: \"EMOTIONAL\",\n      right: \"RESERVED\",\n    },\n  ];\n\n  const getLabel = (key: string, value: number) => {\n    if (key === \"warmth\") {\n      if (value < 30) return \"Cold\";\n      if (value > 70) return \"Warm\";\n      return \"Neutral\";\n    }\n    if (key === \"confidence\") {\n      if (value < 30) return \"Shy\";\n      if (value > 70) return \"Very Confident\";\n      return \"Balanced\";\n    }\n    if (key === \"calmness\") {\n      if (value < 30) return \"Chaotic\";\n      if (value > 70) return \"Calm\";\n      return \"Balanced\";\n    }\n    if (key === \"reserve\") {\n      if (value < 30) return \"Emotional\";\n      if (value > 70) return \"Reserved\";\n      return \"Balanced\";\n    }\n    return \"Neutral\";\n  };\n\n  const handleAutoFill = (data: any) => {\n    updateCharacter(characterIndex, {\n      personality: {\n        warmth: data.warmth ?? character.personality.warmth,\n        confidence: data.confidence ?? character.personality.confidence,\n        calmness: data.calmness ?? character.personality.calmness,\n        reserve: data.reserve ?? character.personality.reserve,\n      },\n    });\n  };\n\n  const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-4xl font-bold text-foreground\">Personality Profile</h2>\n        {storyIdea && (\n          <AIAutoFillButton\n            onAutoFill={handleAutoFill}\n            step=\"personality\"\n            characterIndex={characterIndex}\n            existingData={character}\n            storyIdea={storyIdea}\n          />\n        )}\n      </div>\n      <p className=\"text-muted-foreground mb-8\">\n        Define the core temperament and behavioral nuances of your AI character.\n      </p>\n\n      <div className=\"space-y-6 mb-8\">\n        {sliders.map((slider, index) => {\n          const value = character.personality[slider.key];\n          const label = getLabel(slider.key, value);\n\n          return (\n            <motion.div\n              key={slider.key}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"glass rounded-2xl p-6 border border-border\"\n            >\n              <div className=\"flex justify-between items-center mb-4\">\n                <span className=\"text-sm font-medium text-foreground\">{slider.label}</span>\n                <div className=\"px-3 py-1 rounded-lg bg-violet-500/20 text-violet-400 text-xs font-medium\">\n                  {label}\n                </div>\n              </div>\n\n              <div className=\"relative mb-4\">\n                <div className=\"flex justify-between text-xs text-muted-foreground mb-2\">\n                  <span>{slider.left}</span>\n                  <span>{slider.right}</span>\n                </div>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={value}\n                  onChange={(e) =>\n                    updateCharacter(characterIndex, {\n                      personality: {\n                        ...character.personality,\n                        [slider.key]: parseInt(e.target.value),\n                      },\n                    })\n                  }\n                  className=\"w-full h-2 bg-muted rounded-full appearance-none cursor-pointer accent-violet-500\"\n                  style={{\n                    background: `linear-gradient(to right, rgb(139, 92, 246) 0%, rgb(139, 92, 246) ${value}%, rgb(63, 63, 70) ${value}%, rgb(63, 63, 70) 100%)`,\n                  }}\n                />\n              </div>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={onBack}\n          className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors text-center font-medium\"\n        >\n          <ArrowLeft className=\"w-5 h-5 inline mr-2\" />\n          Back\n        </button>\n        <motion.button\n          onClick={onNext}\n          className=\"flex-[2] py-4 rounded-2xl bg-violet-500 hover:bg-violet-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors\"\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n        >\n          Next Step\n          <ArrowRight className=\"w-5 h-5\" />\n        </motion.button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { ArrowLeft, ArrowRight, Plus } from \"lucide-react\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { motion } from \"framer-motion\";\nimport { useState } from \"react\";\nimport { AIAutoFillButton } from \"@/components/ai-auto-fill-button\";\n\ninterface BackstoryStepProps {\n  characterIndex: number;\n  onNext: () => void;\n  onBack: () => void;\n}\n\nconst BACKSTORY_STYLES = [\n  \"Mysterious Past\",\n  \"Tragic Origin\",\n  \"Heroic Journey\",\n  \"Villain Arc\",\n  \"Rise to Power\",\n  \"Fall from Grace\",\n  \"Redemption Story\",\n  \"Coming of Age\",\n  \"Forbidden Love\",\n  \"Revenge Quest\",\n];\n\nexport default function BackstoryStep({ characterIndex, onNext, onBack }: BackstoryStepProps) {\n  const { characters, updateCharacter } = useCharacter();\n  const character = characters[characterIndex];\n  const [showCustomInput, setShowCustomInput] = useState(false);\n  const [customStyle, setCustomStyle] = useState(\"\");\n\n  const handleStyleSelect = (style: string) => {\n    updateCharacter(characterIndex, { backstoryStyle: style });\n    setShowCustomInput(false);\n    setCustomStyle(\"\");\n  };\n\n  const handleCustomSubmit = () => {\n    if (customStyle.trim()) {\n      handleStyleSelect(customStyle.trim());\n    }\n  };\n\n  const isCustomSelected = character.backstoryStyle && !BACKSTORY_STYLES.includes(character.backstoryStyle);\n\n  const handleAutoFill = (data: string) => {\n    if (BACKSTORY_STYLES.includes(data)) {\n      handleStyleSelect(data);\n    } else {\n      setCustomStyle(data);\n      handleCustomSubmit();\n    }\n  };\n\n  const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-4xl font-bold text-foreground\">Backstory Style</h2>\n        {storyIdea && (\n          <AIAutoFillButton\n            onAutoFill={handleAutoFill}\n            step=\"backstory\"\n            characterIndex={characterIndex}\n            existingData={character}\n            storyIdea={storyIdea}\n          />\n        )}\n      </div>\n      <p className=\"text-muted-foreground mb-8\">\n        Choose the narrative style for your character&apos;s backstory.\n      </p>\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4\">\n        {BACKSTORY_STYLES.map((style) => (\n          <motion.button\n            key={style}\n            onClick={() => handleStyleSelect(style)}\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className={`p-4 rounded-xl glass border-2 transition-all text-left relative overflow-hidden group ${\n              character.backstoryStyle === style\n                ? \"border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20\"\n                : \"border-border hover:border-violet-500/50\"\n            }`}\n          >\n            {character.backstoryStyle === style && (\n              <motion.div\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                className=\"absolute top-2 right-2 w-5 h-5 rounded-full bg-violet-500 flex items-center justify-center\"\n              >\n                <div className=\"w-2 h-2 rounded-full bg-white\" />\n              </motion.div>\n            )}\n            <span className={`text-sm font-medium transition-colors ${\n              character.backstoryStyle === style ? \"text-violet-400\" : \"text-foreground\"\n            }`}>\n              {style}\n            </span>\n            {character.backstoryStyle === style && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"absolute inset-0 border-2 border-violet-500/30 rounded-xl pointer-events-none\"\n              />\n            )}\n          </motion.button>\n        ))}\n      </div>\n\n      {/* Custom Input */}\n      {showCustomInput ? (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: \"auto\" }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"mb-4\"\n        >\n          <div className=\"glass rounded-xl p-4 border-2 border-violet-500/50 bg-violet-500/10\">\n            <label className=\"text-sm font-medium text-foreground mb-2 block\">\n              Custom Backstory Style\n            </label>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={customStyle}\n                onChange={(e) => setCustomStyle(e.target.value)}\n                placeholder=\"e.g., Time Traveler, Immortal Being...\"\n                className=\"flex-1 h-12 px-4 rounded-xl glass border border-violet-500/50 focus:border-violet-500 transition-all outline-none\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    handleCustomSubmit();\n                  }\n                  if (e.key === \"Escape\") {\n                    setShowCustomInput(false);\n                    setCustomStyle(\"\");\n                  }\n                }}\n              />\n              <button\n                onClick={handleCustomSubmit}\n                className=\"px-4 py-2 rounded-xl bg-violet-500 hover:bg-violet-600 text-white font-medium transition-colors\"\n              >\n                Add\n              </button>\n              <button\n                onClick={() => {\n                  setShowCustomInput(false);\n                  setCustomStyle(\"\");\n                }}\n                className=\"px-4 py-2 rounded-xl glass border border-border hover:bg-white/5 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </motion.div>\n      ) : (\n        <motion.button\n          onClick={() => setShowCustomInput(true)}\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          className=\"w-full mb-4 py-3 rounded-xl glass border-2 border-dashed border-border hover:border-violet-500/50 transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          <span className=\"text-sm font-medium\">Add Custom Style</span>\n        </motion.button>\n      )}\n\n      {/* Show selected custom style */}\n      {isCustomSelected && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-4 p-4 rounded-xl glass border-2 border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20 relative\"\n        >\n          <div className=\"absolute top-2 right-2 w-5 h-5 rounded-full bg-violet-500 flex items-center justify-center\">\n            <div className=\"w-2 h-2 rounded-full bg-white\" />\n          </div>\n          <p className=\"text-sm font-medium text-violet-400 mb-1\">Selected Custom Style</p>\n          <p className=\"text-foreground font-semibold\">{character.backstoryStyle}</p>\n          <button\n            onClick={() => {\n              updateCharacter(characterIndex, { backstoryStyle: \"\" });\n              setShowCustomInput(true);\n            }}\n            className=\"mt-2 text-xs text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Change\n          </button>\n        </motion.div>\n      )}\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={onBack}\n          className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors text-center font-medium\"\n        >\n          <ArrowLeft className=\"w-5 h-5 inline mr-2\" />\n          Back\n        </button>\n        <motion.button\n          onClick={onNext}\n          disabled={!character.backstoryStyle}\n          className=\"flex-[2] py-4 rounded-2xl bg-violet-500 hover:bg-violet-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n        >\n          Next Step\n          <ArrowRight className=\"w-5 h-5\" />\n        </motion.button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { ArrowLeft, ArrowRight, Plus } from \"lucide-react\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useState } from \"react\";\nimport { AIAutoFillButton } from \"@/components/ai-auto-fill-button\";\n\ninterface SpeechStepProps {\n  characterIndex: number;\n  onNext: () => void;\n  onBack: () => void;\n}\n\nconst TONE_OPTIONS = [\n  \"Formal & Precise\",\n  \"Casual & Warm\",\n  \"Mysterious & Cryptic\",\n  \"Playful & Energetic\",\n  \"Serious & Authoritative\",\n  \"Gentle & Empathetic\",\n];\n\nconst VOCABULARY_OPTIONS = [\n  \"Archival & Technical\",\n  \"Simple & Direct\",\n  \"Poetic & Flowery\",\n  \"Modern & Slang\",\n  \"Academic & Complex\",\n  \"Conversational\",\n];\n\nexport default function SpeechStep({ characterIndex, onNext, onBack }: SpeechStepProps) {\n  const { characters, updateCharacter } = useCharacter();\n  const character = characters[characterIndex];\n  const [showCustomTone, setShowCustomTone] = useState(false);\n  const [showCustomVocab, setShowCustomVocab] = useState(false);\n  const [customTone, setCustomTone] = useState(\"\");\n  const [customVocab, setCustomVocab] = useState(\"\");\n\n  const speechRules = character.speechRules || {};\n\n  const handleToneSelect = (tone: string) => {\n    updateCharacter(characterIndex, {\n      speechRules: { ...speechRules, tone },\n    });\n    setShowCustomTone(false);\n    setCustomTone(\"\");\n  };\n\n  const handleVocabSelect = (vocab: string) => {\n    updateCharacter(characterIndex, {\n      speechRules: { ...speechRules, vocabulary: vocab },\n    });\n    setShowCustomVocab(false);\n    setCustomVocab(\"\");\n  };\n\n  const isCustomTone = speechRules.tone && !TONE_OPTIONS.includes(speechRules.tone);\n  const isCustomVocab = speechRules.vocabulary && !VOCABULARY_OPTIONS.includes(speechRules.vocabulary);\n\n  const handleAutoFill = (data: any) => {\n    updateCharacter(characterIndex, {\n      speechRules: {\n        tone: data.tone || speechRules.tone,\n        vocabulary: data.vocabulary || speechRules.vocabulary,\n        patterns: data.patterns || speechRules.patterns,\n      },\n    });\n  };\n\n  const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-4xl font-bold text-foreground\">Speech & Behavior</h2>\n        {storyIdea && (\n          <AIAutoFillButton\n            onAutoFill={handleAutoFill}\n            step=\"speech\"\n            characterIndex={characterIndex}\n            existingData={character}\n            storyIdea={storyIdea}\n          />\n        )}\n      </div>\n      <p className=\"text-muted-foreground mb-8\">\n        Define how your character speaks and behaves.\n      </p>\n\n      <div className=\"space-y-6 mb-8\">\n        {/* Tone Selection */}\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-3 block\">Tone</label>\n          <div className=\"grid grid-cols-2 gap-3 mb-3\">\n            {TONE_OPTIONS.map((tone) => (\n              <motion.button\n                key={tone}\n                onClick={() => handleToneSelect(tone)}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className={`p-3 rounded-xl glass border-2 transition-all text-sm relative overflow-hidden group ${\n                  speechRules.tone === tone\n                    ? \"border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20\"\n                    : \"border-border hover:border-violet-500/50\"\n                }`}\n              >\n                {speechRules.tone === tone && (\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    className=\"absolute top-2 right-2 w-4 h-4 rounded-full bg-violet-500 flex items-center justify-center\"\n                  >\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />\n                  </motion.div>\n                )}\n                <span className={`transition-colors ${\n                  speechRules.tone === tone ? \"text-violet-400 font-semibold\" : \"text-foreground\"\n                }`}>\n                  {tone}\n                </span>\n                {speechRules.tone === tone && (\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className=\"absolute inset-0 border-2 border-violet-500/30 rounded-xl pointer-events-none\"\n                  />\n                )}\n              </motion.button>\n            ))}\n          </div>\n\n          {/* Custom Tone Input */}\n          <AnimatePresence>\n            {showCustomTone ? (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: \"auto\" }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"mb-3\"\n              >\n                <div className=\"glass rounded-xl p-3 border-2 border-violet-500/50 bg-violet-500/10\">\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      value={customTone}\n                      onChange={(e) => setCustomTone(e.target.value)}\n                      placeholder=\"e.g., Sarcastic & Witty...\"\n                      className=\"flex-1 h-10 px-3 rounded-lg glass border border-violet-500/50 focus:border-violet-500 transition-all outline-none text-sm\"\n                      autoFocus\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && customTone.trim()) {\n                          handleToneSelect(customTone.trim());\n                        }\n                        if (e.key === \"Escape\") {\n                          setShowCustomTone(false);\n                          setCustomTone(\"\");\n                        }\n                      }}\n                    />\n                    <button\n                      onClick={() => customTone.trim() && handleToneSelect(customTone.trim())}\n                      className=\"px-3 py-2 rounded-lg bg-violet-500 hover:bg-violet-600 text-white text-sm font-medium transition-colors\"\n                    >\n                      Add\n                    </button>\n                    <button\n                      onClick={() => {\n                        setShowCustomTone(false);\n                        setCustomTone(\"\");\n                      }}\n                      className=\"px-3 py-2 rounded-lg glass border border-border hover:bg-white/5 text-sm transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              </motion.div>\n            ) : (\n              !isCustomTone && (\n                <motion.button\n                  onClick={() => setShowCustomTone(true)}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className=\"w-full py-2 rounded-xl glass border-2 border-dashed border-border hover:border-violet-500/50 transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground text-sm\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  <span>Add Custom Tone</span>\n                </motion.button>\n              )\n            )}\n          </AnimatePresence>\n\n          {/* Show selected custom tone */}\n          {isCustomTone && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"mb-3 p-3 rounded-xl glass border-2 border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20 relative\"\n            >\n              <div className=\"absolute top-2 right-2 w-4 h-4 rounded-full bg-violet-500 flex items-center justify-center\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />\n              </div>\n              <p className=\"text-xs font-medium text-violet-400 mb-1\">Selected Custom Tone</p>\n              <p className=\"text-sm font-semibold text-foreground\">{speechRules.tone}</p>\n              <button\n                onClick={() => {\n                  updateCharacter(characterIndex, {\n                    speechRules: { ...speechRules, tone: \"\" },\n                  });\n                  setShowCustomTone(true);\n                }}\n                className=\"mt-1 text-xs text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                Change\n              </button>\n            </motion.div>\n          )}\n        </div>\n\n        {/* Vocabulary Selection */}\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-3 block\">Vocabulary</label>\n          <div className=\"grid grid-cols-2 gap-3 mb-3\">\n            {VOCABULARY_OPTIONS.map((vocab) => (\n              <motion.button\n                key={vocab}\n                onClick={() => handleVocabSelect(vocab)}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className={`p-3 rounded-xl glass border-2 transition-all text-sm relative overflow-hidden group ${\n                  speechRules.vocabulary === vocab\n                    ? \"border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20\"\n                    : \"border-border hover:border-violet-500/50\"\n                }`}\n              >\n                {speechRules.vocabulary === vocab && (\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    className=\"absolute top-2 right-2 w-4 h-4 rounded-full bg-violet-500 flex items-center justify-center\"\n                  >\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />\n                  </motion.div>\n                )}\n                <span className={`transition-colors ${\n                  speechRules.vocabulary === vocab ? \"text-violet-400 font-semibold\" : \"text-foreground\"\n                }`}>\n                  {vocab}\n                </span>\n                {speechRules.vocabulary === vocab && (\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className=\"absolute inset-0 border-2 border-violet-500/30 rounded-xl pointer-events-none\"\n                  />\n                )}\n              </motion.button>\n            ))}\n          </div>\n\n          {/* Custom Vocabulary Input */}\n          <AnimatePresence>\n            {showCustomVocab ? (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: \"auto\" }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"mb-3\"\n              >\n                <div className=\"glass rounded-xl p-3 border-2 border-violet-500/50 bg-violet-500/10\">\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      value={customVocab}\n                      onChange={(e) => setCustomVocab(e.target.value)}\n                      placeholder=\"e.g., Ancient & Mystical...\"\n                      className=\"flex-1 h-10 px-3 rounded-lg glass border border-violet-500/50 focus:border-violet-500 transition-all outline-none text-sm\"\n                      autoFocus\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && customVocab.trim()) {\n                          handleVocabSelect(customVocab.trim());\n                        }\n                        if (e.key === \"Escape\") {\n                          setShowCustomVocab(false);\n                          setCustomVocab(\"\");\n                        }\n                      }}\n                    />\n                    <button\n                      onClick={() => customVocab.trim() && handleVocabSelect(customVocab.trim())}\n                      className=\"px-3 py-2 rounded-lg bg-violet-500 hover:bg-violet-600 text-white text-sm font-medium transition-colors\"\n                    >\n                      Add\n                    </button>\n                    <button\n                      onClick={() => {\n                        setShowCustomVocab(false);\n                        setCustomVocab(\"\");\n                      }}\n                      className=\"px-3 py-2 rounded-lg glass border border-border hover:bg-white/5 text-sm transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              </motion.div>\n            ) : (\n              !isCustomVocab && (\n                <motion.button\n                  onClick={() => setShowCustomVocab(true)}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className=\"w-full py-2 rounded-xl glass border-2 border-dashed border-border hover:border-violet-500/50 transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-foreground text-sm\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  <span>Add Custom Vocabulary</span>\n                </motion.button>\n              )\n            )}\n          </AnimatePresence>\n\n          {/* Show selected custom vocabulary */}\n          {isCustomVocab && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"mb-3 p-3 rounded-xl glass border-2 border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20 relative\"\n            >\n              <div className=\"absolute top-2 right-2 w-4 h-4 rounded-full bg-violet-500 flex items-center justify-center\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />\n              </div>\n              <p className=\"text-xs font-medium text-violet-400 mb-1\">Selected Custom Vocabulary</p>\n              <p className=\"text-sm font-semibold text-foreground\">{speechRules.vocabulary}</p>\n              <button\n                onClick={() => {\n                  updateCharacter(characterIndex, {\n                    speechRules: { ...speechRules, vocabulary: \"\" },\n                  });\n                  setShowCustomVocab(true);\n                }}\n                className=\"mt-1 text-xs text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                Change\n              </button>\n            </motion.div>\n          )}\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Speech Patterns (Optional)\n          </label>\n          <textarea\n            placeholder=\"e.g., Uses 'hmm' frequently, speaks in questions...\"\n            value={speechRules.patterns || \"\"}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                speechRules: { ...speechRules, patterns: e.target.value },\n              })\n            }\n            className=\"w-full h-24 px-4 py-3 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none resize-none\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={onBack}\n          className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors text-center font-medium\"\n        >\n          <ArrowLeft className=\"w-5 h-5 inline mr-2\" />\n          Back\n        </button>\n        <motion.button\n          onClick={onNext}\n          disabled={!speechRules.tone || !speechRules.vocabulary}\n          className=\"flex-[2] py-4 rounded-2xl bg-violet-500 hover:bg-violet-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n        >\n          Next Step\n          <ArrowRight className=\"w-5 h-5\" />\n        </motion.button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { ArrowLeft, Sparkles } from \"lucide-react\";\nimport { useCharacter } from \"@/context/CharacterContext\";\nimport { motion } from \"framer-motion\";\nimport { AIAutoFillButton } from \"@/components/ai-auto-fill-button\";\n\ninterface BoundariesStepProps {\n  characterIndex: number;\n  onNext: () => void;\n  onBack: () => void;\n}\n\nconst CONTENT_RATINGS = [\"SFW\", \"PG-13\", \"Mature\", \"Explicit\"];\n\nexport default function BoundariesStep({ characterIndex, onNext, onBack }: BoundariesStepProps) {\n  const { characters, updateCharacter } = useCharacter();\n  const character = characters[characterIndex];\n\n  const boundaries = character.boundaries || {};\n\n  const handleAutoFill = (data: any) => {\n    updateCharacter(characterIndex, {\n      boundaries: {\n        contentRating: data.contentRating || boundaries.contentRating,\n        topics: data.topics || boundaries.topics,\n        tone: data.tone || boundaries.tone,\n      },\n    });\n  };\n\n  const storyIdea = typeof window !== \"undefined\" ? localStorage.getItem(\"storyIdea\") : null;\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-4xl font-bold text-foreground\">Boundaries & Tone</h2>\n        {storyIdea && (\n          <AIAutoFillButton\n            onAutoFill={handleAutoFill}\n            step=\"boundaries\"\n            characterIndex={characterIndex}\n            existingData={character}\n            storyIdea={storyIdea}\n          />\n        )}\n      </div>\n      <p className=\"text-muted-foreground mb-8\">\n        Set the content boundaries and overall tone for your character.\n      </p>\n\n      <div className=\"space-y-6 mb-8\">\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-3 block\">\n            Content Rating\n          </label>\n          <div className=\"grid grid-cols-4 gap-3\">\n            {CONTENT_RATINGS.map((rating) => (\n              <motion.button\n                key={rating}\n                onClick={() =>\n                  updateCharacter(characterIndex, {\n                    boundaries: { ...boundaries, contentRating: rating },\n                  })\n                }\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className={`p-3 rounded-xl glass border-2 transition-all text-sm font-medium relative overflow-hidden group ${\n                  boundaries.contentRating === rating\n                    ? \"border-violet-500 bg-violet-500/20 shadow-lg shadow-violet-500/20\"\n                    : \"border-border hover:border-violet-500/50\"\n                }`}\n              >\n                {boundaries.contentRating === rating && (\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    className=\"absolute top-1 right-1 w-4 h-4 rounded-full bg-violet-500 flex items-center justify-center\"\n                  >\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />\n                  </motion.div>\n                )}\n                <span className={`transition-colors ${\n                  boundaries.contentRating === rating ? \"text-violet-400 font-bold\" : \"text-foreground\"\n                }`}>\n                  {rating}\n                </span>\n                {boundaries.contentRating === rating && (\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className=\"absolute inset-0 border-2 border-violet-500/30 rounded-xl pointer-events-none\"\n                  />\n                )}\n              </motion.button>\n            ))}\n          </div>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Topics to Avoid (Optional)\n          </label>\n          <textarea\n            placeholder=\"e.g., Violence, Politics, Religion...\"\n            value={boundaries.topics || \"\"}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                boundaries: { ...boundaries, topics: e.target.value },\n              })\n            }\n            className=\"w-full h-24 px-4 py-3 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none resize-none\"\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium text-foreground mb-2 block\">\n            Overall Tone (Optional)\n          </label>\n          <textarea\n            placeholder=\"e.g., Light-hearted, Serious, Dark...\"\n            value={boundaries.tone || \"\"}\n            onChange={(e) =>\n              updateCharacter(characterIndex, {\n                boundaries: { ...boundaries, tone: e.target.value },\n              })\n            }\n            className=\"w-full h-24 px-4 py-3 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none resize-none\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={onBack}\n          className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors text-center font-medium\"\n        >\n          <ArrowLeft className=\"w-5 h-5 inline mr-2\" />\n          Back\n        </button>\n        <motion.button\n          onClick={onNext}\n          disabled={!boundaries.contentRating}\n          className=\"flex-[2] py-4 rounded-2xl bg-violet-500 hover:bg-violet-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n        >\n          <Sparkles className=\"w-5 h-5\" />\n          Generate Character{characterIndex === 0 && characters.length > 1 ? \"s\" : \"\"}\n        </motion.button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Key, CheckCircle2 } from \"lucide-react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\ninterface APIKeyModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSave: () => void;\r\n}\r\n\r\nconst PROVIDERS = [\r\n  { value: \"openai\", label: \"OpenAI\", placeholder: \"sk-...\" },\r\n  { value: \"gemini\", label: \"Google Gemini\", placeholder: \"AIza...\" },\r\n  { value: \"openrouter\", label: \"OpenRouter\", placeholder: \"sk-or-...\" },\r\n  { value: \"huggingface\", label: \"HuggingFace\", placeholder: \"hf_...\" },\r\n];\r\n\r\nexport function APIKeyModal({ isOpen, onClose, onSave }: APIKeyModalProps) {\r\n  const [selectedProvider, setSelectedProvider] = useState(\"openai\");\r\n  const [apiKey, setApiKey] = useState(\"\");\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Load existing key for selected provider if any\r\n      const stored = localStorage.getItem(`api_key_${selectedProvider}`);\r\n      if (stored) {\r\n        setApiKey(stored);\r\n      } else {\r\n        setApiKey(\"\");\r\n      }\r\n    }\r\n  }, [isOpen, selectedProvider]);\r\n\r\n  const handleSave = () => {\r\n    if (!apiKey.trim()) return;\r\n\r\n    setIsSaving(true);\r\n\r\n    // Store API key in localStorage\r\n    localStorage.setItem(`api_key_${selectedProvider}`, apiKey.trim());\r\n    localStorage.setItem(\"api_key_provider\", selectedProvider);\r\n    localStorage.setItem(\"api_key_connected\", \"true\");\r\n\r\n    // Small delay for UX\r\n    setTimeout(() => {\r\n      setIsSaving(false);\r\n      onSave();\r\n      onClose();\r\n    }, 300);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setApiKey(\"\");\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={handleClose}\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\r\n          />\r\n\r\n          {/* Modal */}\r\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\">\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n              transition={{ duration: 0.2, ease: [0.22, 1, 0.36, 1] }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"glass rounded-3xl p-8 max-w-md w-full border border-border pointer-events-auto\"\r\n            >\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-violet-500/20 flex items-center justify-center\">\r\n                    <Key className=\"w-5 h-5 text-violet-400\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-xl font-semibold text-foreground\">\r\n                      API Key Required\r\n                    </h2>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Enter your API key to generate content\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"w-8 h-8 rounded-lg glass border border-border hover:bg-white/5 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <X className=\"w-4 h-4 text-foreground\" />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Provider Selection */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  AI Provider\r\n                </label>\r\n                <select\r\n                  value={selectedProvider}\r\n                  onChange={(e) => setSelectedProvider(e.target.value)}\r\n                  className=\"w-full h-12 px-4 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none appearance-none cursor-pointer bg-background [&>option]:bg-zinc-900 [&>option]:text-white\"\r\n                >\r\n                  {PROVIDERS.map((provider) => (\r\n                    <option key={provider.value} value={provider.value} className=\"bg-zinc-900 text-white\">\r\n                      {provider.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* API Key Input */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  API Key\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={apiKey}\r\n                  onChange={(e) => setApiKey(e.target.value)}\r\n                  placeholder={PROVIDERS.find((p) => p.value === selectedProvider)?.placeholder}\r\n                  className=\"w-full h-12 px-4 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none font-mono text-sm\"\r\n                  autoFocus\r\n                />\r\n                <p className=\"text-xs text-muted-foreground mt-2\">\r\n                  Your API key is stored locally and never sent to our servers.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Buttons */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"flex-1 py-3 rounded-xl glass border border-border hover:bg-white/5 transition-colors font-medium\"\r\n                >\r\n                  Close\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={!apiKey.trim() || isSaving}\r\n                  className=\"flex-1 py-3 rounded-xl bg-violet-500 hover:bg-violet-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                  {isSaving ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                      Saving...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <CheckCircle2 className=\"w-4 h-4\" />\r\n                      Save Key\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}