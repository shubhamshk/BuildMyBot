{"version":3,"sources":["../../../../../../../OneDrive/Desktop/makemyBot/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../../OneDrive/Desktop/makemyBot/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../OneDrive/Desktop/makemyBot/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../../OneDrive/Desktop/makemyBot/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../../OneDrive/Desktop/makemyBot/app/character/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\n\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { ArrowLeft, Loader2, Save, Check } from \"lucide-react\";\r\nimport { useCharacter } from \"@/context/CharacterContext\";\r\nimport Link from \"next/link\";\r\nimport { APIKeyManager } from \"@/components/api-key-manager\";\r\nimport { TerminalOutput } from \"@/components/terminal-output\";\r\nimport { validateAPIKey, generatePersonality, generateScenario, generateBio } from \"@/lib/generation/service\";\r\nimport { isAPIKeyConnected, APIProvider } from \"@/lib/api-key\";\r\nimport { saveCharacter, getCurrentUser } from \"@/lib/supabase/characters\";\r\n\r\ntype SectionId = \"personality\" | \"scenarioGreeting\" | \"bio\";\r\n\r\ninterface SectionState {\r\n  loading: boolean;\r\n  error: string | null;\r\n  content: string;\r\n}\r\n\r\nexport default function CharacterResultPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const { characters, updateCharacter } = useCharacter();\r\n  const [showAPIKeyModal, setShowAPIKeyModal] = useState(false);\r\n  const [scenarioInput, setScenarioInput] = useState<string>(\"\");\r\n  const [showScenarioModal, setShowScenarioModal] = useState(false);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [isSaved, setIsSaved] = useState(false);\r\n  const [saveError, setSaveError] = useState<string | null>(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const character = characters.find((char) => char.id === params?.id);\r\n\r\n  // Check if user is logged in\r\n  useEffect(() => {\r\n    const checkUser = async () => {\r\n      const { user } = await getCurrentUser();\r\n      setIsLoggedIn(!!user);\r\n    };\r\n    checkUser();\r\n  }, []);\r\n\r\n  const [sections, setSections] = useState<Record<SectionId, SectionState>>({\r\n    personality: {\r\n      loading: false,\r\n      error: null,\r\n      content: character?.generatedContent?.personality || \"\",\r\n    },\r\n    scenarioGreeting: {\r\n      loading: false,\r\n      error: null,\r\n      content: character?.generatedContent?.scenario || \"\",\r\n    },\r\n    bio: {\r\n      loading: false,\r\n      error: null,\r\n      content: character?.generatedContent?.bio || \"\",\r\n    },\r\n  });\r\n\r\n  // Check API key and generate on mount\r\n  useEffect(() => {\r\n    if (!character) return;\r\n\r\n    // Check if already fully generated\r\n    if (character.generatedContent?.personality &&\r\n      character.generatedContent?.scenario) {\r\n      setSections({\r\n        personality: {\r\n          loading: false,\r\n          error: null,\r\n          content: character.generatedContent.personality || \"\",\r\n        },\r\n        scenarioGreeting: {\r\n          loading: false,\r\n          error: null,\r\n          content: character.generatedContent.scenario || \"\",\r\n        },\r\n        bio: {\r\n          loading: false,\r\n          error: null,\r\n          content: character.generatedContent.bio || \"\",\r\n        },\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check API key - HARD BLOCK\r\n    if (!isAPIKeyConnected()) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    // Start generation\r\n    handleGenerateAll();\r\n  }, [character?.id]);\r\n\r\n  // Listen for API key changes\r\n  useEffect(() => {\r\n    const handleStorageChange = () => {\r\n      if (isAPIKeyConnected() && !character?.generatedContent?.personality) {\r\n        handleGenerateAll();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"storage\", handleStorageChange);\r\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\r\n  }, [character?.id]);\r\n\r\n  const updateSection = useCallback((sectionId: SectionId, updates: Partial<SectionState>) => {\r\n    setSections((prev) => ({\r\n      ...prev,\r\n      [sectionId]: { ...prev[sectionId], ...updates },\r\n    }));\r\n  }, []);\r\n\r\n  const updateCharacterContent = useCallback((sectionId: SectionId, content: string) => {\r\n    const charIndex = characters.findIndex((c) => c.id === character?.id);\r\n    if (charIndex !== -1) {\r\n      const currentContent = character?.generatedContent || {};\r\n      let key: string;\r\n      if (sectionId === \"personality\") {\r\n        key = \"personality\";\r\n      } else if (sectionId === \"scenarioGreeting\") {\r\n        key = \"scenario\";\r\n      } else {\r\n        key = \"bio\";\r\n      }\r\n      updateCharacter(charIndex, {\r\n        generatedContent: {\r\n          ...currentContent,\r\n          [key]: content,\r\n        },\r\n      });\r\n    }\r\n  }, [character, characters, updateCharacter]);\r\n\r\n  const handleGenerateSection = async (\r\n    sectionId: SectionId,\r\n    apiKey?: string,\r\n    provider?: APIProvider\r\n  ) => {\r\n    if (!character) return;\r\n\r\n    const keyCheck = apiKey && provider ? { valid: true, apiKey, provider } : validateAPIKey();\r\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\r\n      setShowAPIKeyModal(true);\r\n      throw new Error(keyCheck.error || \"API key required\");\r\n    }\r\n\r\n    updateSection(sectionId, { loading: true, error: null });\r\n\r\n    try {\r\n      let content = \"\";\r\n\r\n      if (sectionId === \"personality\") {\r\n        content = await generatePersonality(character, keyCheck.apiKey, keyCheck.provider);\r\n      } else if (sectionId === \"scenarioGreeting\") {\r\n        const userScenario = scenarioInput.trim() || undefined;\r\n        content = await generateScenario(character, userScenario, keyCheck.apiKey, keyCheck.provider);\r\n      } else if (sectionId === \"bio\") {\r\n        const scenario = sections.scenarioGreeting.content || character?.generatedContent?.scenario || \"\";\r\n        if (!scenario) {\r\n          throw new Error(\"Scenario must be generated before bio\");\r\n        }\r\n        content = await generateBio(character, scenario, keyCheck.apiKey, keyCheck.provider);\r\n      }\r\n\r\n      // Validate content is not empty\r\n      if (!content || content.trim() === \"\") {\r\n        throw new Error(\"Generation returned empty content. Please try again.\");\r\n      }\r\n\r\n      updateSection(sectionId, { loading: false, error: null, content });\r\n      updateCharacterContent(sectionId, content);\r\n    } catch (error: any) {\r\n      updateSection(sectionId, {\r\n        loading: false,\r\n        error: error.message || \"Generation failed\",\r\n        content: sections[sectionId].content,\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleGenerateAll = async () => {\r\n    if (!character || isGenerating) return;\r\n\r\n    const keyCheck = validateAPIKey();\r\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n\r\n    try {\r\n      // Step 1: Generate Personality (MUST succeed)\r\n      await handleGenerateSection(\"personality\", keyCheck.apiKey, keyCheck.provider);\r\n\r\n      // Step 2: Show scenario modal after personality succeeds\r\n      setShowScenarioModal(true);\r\n    } catch (error) {\r\n      console.error(\"Generation failed:\", error);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleScenarioSubmit = async () => {\r\n    setShowScenarioModal(false);\r\n    const keyCheck = validateAPIKey();\r\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    try {\r\n      // Generate combined scenario + greeting\r\n      await handleGenerateSection(\"scenarioGreeting\", keyCheck.apiKey, keyCheck.provider);\r\n      // Generate bio after scenario\r\n      await handleGenerateSection(\"bio\", keyCheck.apiKey, keyCheck.provider);\r\n    } catch (error) {\r\n      console.error(\"Scenario/Greeting/Bio generation failed:\", error);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleSkipScenario = async () => {\r\n    setShowScenarioModal(false);\r\n    setScenarioInput(\"\");\r\n    const keyCheck = validateAPIKey();\r\n    if (!keyCheck.valid || !keyCheck.apiKey || !keyCheck.provider) {\r\n      setShowAPIKeyModal(true);\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    try {\r\n      // Generate combined scenario + greeting without user input\r\n      await handleGenerateSection(\"scenarioGreeting\", keyCheck.apiKey, keyCheck.provider);\r\n      // Generate bio after scenario\r\n      await handleGenerateSection(\"bio\", keyCheck.apiKey, keyCheck.provider);\r\n    } catch (error) {\r\n      console.error(\"Generation failed:\", error);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleRewrite = async (sectionId: SectionId) => {\r\n    await handleGenerateSection(sectionId);\r\n  };\r\n\r\n  const handleSaveToProfile = async () => {\r\n    if (!character || isSaving || isSaved) return;\r\n\r\n    // Check if logged in\r\n    const { user } = await getCurrentUser();\r\n    if (!user) {\r\n      router.push(\"/auth/signin\");\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    setSaveError(null);\r\n\r\n    try {\r\n      const { error } = await saveCharacter({\r\n        name: character.basics.name,\r\n        age: character.basics.age,\r\n        gender: character.basics.gender,\r\n        setting: character.basics.setting,\r\n        relationship: character.basics.relationship,\r\n        personality: character.personality,\r\n        backstoryStyle: character.backstoryStyle,\r\n        speechRules: character.speechRules,\r\n        boundaries: character.boundaries,\r\n        generatedContent: character.generatedContent,\r\n      });\r\n\r\n      if (error) {\r\n        setSaveError(error);\r\n      } else {\r\n        setIsSaved(true);\r\n        // Reset after 3 seconds\r\n        setTimeout(() => setIsSaved(false), 3000);\r\n      }\r\n    } catch (err: any) {\r\n      setSaveError(err.message || \"Failed to save character\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!character) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex items-center justify-center px-4\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-xl font-semibold text-foreground mb-4\">Character not found</p>\r\n          <Link\r\n            href=\"/create\"\r\n            className=\"inline-block px-6 py-3 rounded-xl bg-violet-500 hover:bg-violet-600 text-white font-medium transition-colors\"\r\n          >\r\n            Create Character\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background px-4 py-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <Link\r\n            href=\"/wizard\"\r\n            className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5\" />\r\n            <span className=\"text-sm\">Back to Wizard</span>\r\n          </Link>\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-2\">{character.basics.name}</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {character.basics.setting} â€¢ {character.basics.age} years old\r\n          </p>\r\n        </div>\r\n\r\n        {/* Character Sections */}\r\n        <div className=\"space-y-6\">\r\n          {/* Personality Section */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0 }}\r\n          >\r\n            <TerminalOutput\r\n              title=\"Personality Profile\"\r\n              content={sections.personality.content}\r\n              loading={sections.personality.loading}\r\n              error={sections.personality.error}\r\n              onRewrite={() => handleRewrite(\"personality\")}\r\n              isGenerating={isGenerating}\r\n            />\r\n          </motion.div>\r\n\r\n          {/* Scenario & Greeting Section */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.1 }}\r\n          >\r\n            <TerminalOutput\r\n              title=\"Scenario & Greeting\"\r\n              content={sections.scenarioGreeting.content}\r\n              loading={sections.scenarioGreeting.loading}\r\n              error={sections.scenarioGreeting.error}\r\n              onRewrite={() => handleRewrite(\"scenarioGreeting\")}\r\n              isGenerating={isGenerating}\r\n            />\r\n          </motion.div>\r\n\r\n          {/* Bio Section */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 }}\r\n          >\r\n            <TerminalOutput\r\n              title=\"Character Bio\"\r\n              content={sections.bio.content}\r\n              loading={sections.bio.loading}\r\n              error={sections.bio.error}\r\n              onRewrite={() => handleRewrite(\"bio\")}\r\n              isGenerating={isGenerating}\r\n            />\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"mt-8 space-y-4\">\r\n          {/* Save Error */}\r\n          {saveError && (\r\n            <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-sm\">\r\n              {saveError}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-4\">\r\n            <Link\r\n              href=\"/create\"\r\n              className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors text-center font-medium\"\r\n            >\r\n              Create Another\r\n            </Link>\r\n            <button\r\n              onClick={() => router.push(\"/wizard\")}\r\n              className=\"flex-1 py-4 rounded-2xl glass border border-border hover:bg-white/5 transition-colors font-medium\"\r\n            >\r\n              Edit Character\r\n            </button>\r\n            <button\r\n              onClick={handleSaveToProfile}\r\n              disabled={isSaving || isSaved || !sections.personality.content}\r\n              className={`flex items-center justify-center gap-2 px-6 py-4 rounded-2xl font-semibold transition-colors ${isSaved\r\n                  ? \"bg-emerald-500 text-white\"\r\n                  : \"bg-violet-500 hover:bg-violet-600 text-white\"\r\n                } disabled:opacity-50`}\r\n            >\r\n              {isSaving ? (\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n              ) : isSaved ? (\r\n                <Check className=\"w-5 h-5\" />\r\n              ) : (\r\n                <Save className=\"w-5 h-5\" />\r\n              )}\r\n              {isSaving ? \"Saving...\" : isSaved ? \"Saved!\" : isLoggedIn ? \"Save\" : \"Sign In to Save\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Key Manager */}\r\n      <APIKeyManager\r\n        isOpen={showAPIKeyModal}\r\n        onClose={() => setShowAPIKeyModal(false)}\r\n        onSave={() => {\r\n          setShowAPIKeyModal(false);\r\n          // Immediately restart generation\r\n          if (!character.generatedContent?.personality) {\r\n            handleGenerateAll();\r\n          }\r\n        }}\r\n      />\r\n\r\n      {/* Scenario Modal */}\r\n      {showScenarioModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n          <div\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\"\r\n            onClick={() => { }}\r\n          />\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            className=\"glass rounded-3xl p-8 max-w-2xl w-full border border-border relative z-10\"\r\n          >\r\n            <h2 className=\"text-2xl font-bold text-foreground mb-4\">Define Scenario (Optional)</h2>\r\n            <p className=\"text-muted-foreground mb-6\">\r\n              You can provide a custom scenario or let AI generate one based on your character.\r\n            </p>\r\n            <textarea\r\n              value={scenarioInput}\r\n              onChange={(e) => setScenarioInput(e.target.value)}\r\n              placeholder=\"e.g., The character is in a coffee shop, waiting for someone. It's raining outside...\"\r\n              className=\"w-full h-32 px-4 py-3 rounded-xl glass border border-border focus:border-violet-500 transition-all outline-none resize-none mb-6\"\r\n            />\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={handleSkipScenario}\r\n                disabled={isGenerating}\r\n                className=\"flex-1 py-3 rounded-xl glass border border-border hover:bg-white/5 transition-colors font-medium disabled:opacity-50\"\r\n              >\r\n                Skip (AI Generate)\r\n              </button>\r\n              <button\r\n                onClick={handleScenarioSubmit}\r\n                disabled={isGenerating}\r\n                className=\"flex-1 py-3 rounded-xl bg-violet-500 hover:bg-violet-600 text-white font-medium transition-colors disabled:opacity-50\"\r\n              >\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,3]}